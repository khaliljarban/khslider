/*
 * KH SLIDER
 * develope by:khalil jarban
 * ver 2.3
 * publish date 8.1.2015
 * 444802@gmail.com
 */
(function(e){function t(t,n){var r=this;var i={sliderDuration:2e3,sliderSpeed:1e3,isResponsive:true,isRtl:false,isAuto:true,sliderType:"twodirections",isTitles:true,issubTitles:true,controllerType:"nextprev",isMobile:false,isThumbs:false};r.sliderHeight=600,r.currentDirection="left";r.currentSlider=0;r.sliderLastMoved=(new Date).getTime(),r.sliderImages=[];r.minImageheight=99999999999999;r.settings=e.extend({},i,t);r.currentElement=n;r.slidersCount=r.currentElement.find("ul").find("li").length;r.sliderWidth=r.currentElement.width();r.currentElement.find("ul").find("li").width(r.sliderWidth);r.doTitles=function(){if(!r.settings.isTitles)return false;r.currentElement.find("ul").find("li").each(function(){var t=e(this).data("title");if(typeof t!="undefined"){e(this).addClass("title_allowed");var n="";n+='<div class="title_outer">';n+='<div class="title_inner">'+t+"</div>";n+="</div>";e(this).append(n)}});if(!r.settings.issubTitles)return false;r.currentElement.find("ul").find("li").each(function(){var t=e(this).data("subtitle");if(typeof t!="undefined"){e(this).addClass("subtitle_allowed");var n="";n+='<div class="subtitle_outer">';n+='<div class="subtitle_inner">'+t+"</div>";n+="</div>";e(this).append(n)}})};r.loadImages=function(){var t=0;var n=[];r.currentElement.find("ul").find("li").each(function(){var r=[];r["src"]=e(this).find("img").attr("src");var i=e(this).find("img").attr("title");if(typeof i=="undefined")i="";r["title"]=i;var s=e(this).find("img").attr("alt");if(typeof s=="undefined")s="";r["alt"]=s;n[t]=r;t++});r.sliderImages=n};r.doIndexes=function(){for(var e=0;e<r.slidersCount;e++)r.currentElement.find("li").eq(e).attr("data-ind",e)};r.loadController=function(){if(r.settings.controllerType==false)return false;switch(r.settings.controllerType){case"nextprev":this.get_nextprevController();break;case"points":this.get_pointsController();break}};r.get_nextprevController=function(){var t="";t='<div class="slider_controller">';t+='<small class="slider_arrows slider_prev">prev</small>';t+='<small class="slider_arrows slider_next">next</small>';t+"</div>";r.currentElement.append(t);e(".slider_next").click(function(){if(r.settings.sliderType=="skiptofirst")r.doSkiptofirst();else r.gotoTheNext();r.sliderLastMoved=(new Date).getTime()});e(".slider_prev").click(function(){r.gotoThePrev();r.sliderLastMoved=(new Date).getTime()})};r.doSkiptofirst=function(){var e=r.whoisnext();if(e!=-1)r.gotoIndext(e);else r.gotoIndext(0)};r.whoisnext=function(){var e=r.currentSlider+1;if(e<r.slidersCount){return e}else{return-1}};r.gotoIndext=function(e){var t={left:-1*e*r.sliderWidth+"px"};if(r.settings.isRtl)t={right:-1*e*r.sliderWidth+"px"};if(!r.settings.isMobile)r.currentElement.find("ul").css(t);else r.currentElement.find("ul").stop().animate(t,r.settings.sliderSpeed);r.currentSlider=e;r.doControllerStatus()};r.doControllerStatus=function(){if(r.settings.controllerType==false)return false;switch(r.settings.controllerType){case"nextprev":r.donextprevStatus();break;case"points":r.dopointsStatus();break}if(r.settings.isThumbs){r.dothumbsStatus()}if(r.settings.isTitles){r.dotitlesStatus()}};r.dotitlesStatus=function(){if(e(".title_outer").length>0){e(".title_outer.active").removeClass("active");r.currentElement.find("ul").find('li[data-ind="'+r.currentSlider+'"]').find(".title_outer").addClass("active")}if(e(".subtitle_outer").length>0){e(".subtitle_outer.active").removeClass("active");r.currentElement.find("ul").find('li[data-ind="'+r.currentSlider+'"]').find(".subtitle_outer").addClass("active")}};r.donextprevStatus=function(){if(r.currentSlider>0)e(".slider_prev").removeClass("inactive");else e(".slider_prev").addClass("inactive");if(this.currentSlider+1<this.slidersCount)e(".slider_next").removeClass("inactive");else e(".slider_next").addClass("inactive")};r.dopointsStatus=function(){e(".slider_point.current").removeClass("current");e('.slider_point[data-ind="'+r.currentSlider+'"]').addClass("current")};r.dothumbsStatus=function(){e(".slider_thumb.current").removeClass("current");e('.slider_thumb[data-ind="'+r.currentSlider+'"]').addClass("current")};r.gotoThePrev=function(){var e=r.whoisprev();if(e!=-1)r.gotoIndext(e);else r.currentDirection="left"};r.preAutoslider=function(){setInterval(r.doAutoslider,r.settings.sliderDuration)};r.doResize=function(){r.sliderWidth=r.currentElement.width();r.sliderHeight=r.currentElement.height();r.currentElement.find("ul").find("li").width(r.sliderWidth);r.currentElement.find("ul").find("li").find("img").width(r.sliderWidth);r.gotoIndext(0);return true};r.doAutoslider=function(){if(r.sliderLastMoved+r.settings.sliderDuration+1e3<(new Date).getTime()){switch(r.settings.sliderType){case"twodirections":r.doTwodirection();break;case"skiptofirst":r.doSkiptofirst();break}}};r.doTwodirection=function(){if(r.currentDirection=="left")r.gotoTheNext();else r.gotoThePrev()};r.doRtl=function(){r.currentElement.find("ul").addClass("flr");r.currentElement.find("ul").find("li").addClass("flr");if(r.settings.controllerType!=false){r.currentElement.find(".slider_controller").addClass("flr");r.currentElement.find(".slider_controller").find(".slider_arrows").addClass("flr")}};r.gotoTheNext=function(){var e=r.whoisnext();if(e!=-1)r.gotoIndext(e);else r.currentDirection="right"};r.whoisprev=function(){var e=r.currentSlider-1;if(e>=0){return e}else{return-1}};r.getThumbs=function(){if(r.settings.isThumbs==false)return false;if(r.sliderImages.length==0)return false;var t="";t='<div class="slider_thumbs">';for(var n=0;n<r.sliderImages.length;n++){if(typeof r.sliderImages[n]!="undefined"&&typeof r.sliderImages[n].src!="undefined"){if(n==0)t+='<img data-ind="'+n+'" alt="'+r.sliderImages[n].alt+'" title="'+r.sliderImages[n].title+'" src="'+r.sliderImages[n].src+'" class="slider_thumb current" />';else t+='<img data-ind="'+n+'" alt="'+r.sliderImages[n].alt+'" title="'+r.sliderImages[n].title+'" src="'+r.sliderImages[n].src+'" class="slider_thumb " />'}}t+"</div>";r.currentElement.append(t);e(".slider_thumb").click(function(){var e=jQuery(this).data("ind");r.gotoIndext(e);r.sliderLastMoved=(new Date).getTime()})};r.get_pointsController=function(){var t="";t='<div class="slider_controller">';for(var n=0;n<r.slidersCount;n++)if(n==0)t+='<small data-ind="'+n+'" class="slider_point current"></small>';else t+='<small data-ind="'+n+'" class="slider_point"></small>';t+"</div>";r.currentElement.append(t);e(".slider_point").click(function(){var t=e(this).data("ind");r.gotoIndext(t);r.sliderLastMoved=(new Date).getTime()})}}e.fn.loadkhSlider=function(n){var r=new t(n,e(this));r.loadImages();r.doIndexes();r.doTitles();r.loadController();r.doControllerStatus();r.getThumbs();if(r.settings.isResponsive)e(window).resize(r.doResize);if(r.settings.isAuto)r.preAutoslider();if(r.settings.isRtl)r.doRtl()}})(jQuery)